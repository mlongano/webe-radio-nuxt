<template>
  <div>
    <main
      class="
        min-h-full
        pt-8
        pb-8
        bg-gradient-to-br
        dark:from-purple-800
        dark:to-purple-400
        from-purple-400
        to-purple-100;
      "
    >
      <div class="relative">
        <img
          class="z-10 relative top-0"
          src="~/assets/images/ragazza-cuffie-microfono-sorride.png"
          alt=""
          srcset=""
        />
        <div
          class="
            z-0
            absolute
            font-montserrat
            text-5xl
            md:text-7xl
            top-0
            left-1/2
            md:left-1/2
            lg:top-0
            lg:text-9xl
          "
        >
          <h1 class="font-bold text-5xl md:text-7xl lg:text-9xl">WeBe</h1>
          <h2 class="font-extralight text-5xl md:text-7xl lg:text-9xl">Radio</h2>
        </div>
      </div>
      <div class="w-11/12 m-auto" v-html="spreakerEmbed" />
    </main>
    <footer class="mt-36">
    <img v-if="isDarkTheme"
        class="mx-auto mb-36"
        src="~/assets/images/airpodsWhite.png"
        alt="airpods"
        width="80px"
        height="80px" />
    <img v-else
        class="mx-auto mb-36"
        src="~/assets/images/airpodsBlack.png"
        alt="airpods"
        width="80px"
        height="80px" />
       <div class="mx-auto">
         <p>La voce della radio</p>
      <av-waveform
      audio-src="https://www.voicebookradio.com/audio/programmi/2103-la-voce-della-radio/210609-la-voce-della-radio-marconi-rovereto-rosa-bianca.mp3"
      ></av-waveform>
      </div>
      <div class="mx-auto w-4/5 text-2xl  font-medium">
        <h2 class="text-4xl mb-6">Il progetto</h2>

        <p class="mb-6">
          WeBe RADIO mira alla realizzazione di una web radio, costituita e gestita
          da una rete di scuole distribuite sul territorio provinciale, e
          precisamente dallâ€™:
        </p>

        <ul class="mb-6">
          <li>Tecnico Tecnologico "Marconi" di Rovereto (capofila)</li>
          <li>Istituto Tecnico Economico "A. Tambosi" di Trento</li>
          <li>Istituto di Istruzione "La Rosa Bianca" di Cavalese/Predazzo.</li>
        </ul>
        <p class="mb-36">
          Ogni istituto costituisce una redazione autonoma con dispositivi
          propri di trasmissione coordinati da una regia in un unico palinsesto.
          Nasce come forma di didattica sperimentale e innovativa tesa al
          coinvolgimento diretto e motivazionale dei giovani: uno strumento
          poliedrico e multidisciplinare che permette di allenare competenze sia
          tecniche che comunicative.
        </p>
      </div>
      <div class="relative">
        <h2 class="uppercase text-2xl font-bold text-center mb-3">Le scuole</h2>
        <hr class="border-gray-800 bg-gray-800 dark:bg-gray-50 dark:border-gray-50 border-solid h-2 w-2/3 mx-auto rounded-lg mb-6">
        <div class="flex flex-row flex-wrap justify-around gap-3">
          <img src="~/assets/images/marconiQuadrato.jpg" alt="Marconi">
          <img src="~/assets/images/larosabiancaQuadrato.jpg" alt="La Rosa Bianca">
          <img src="~/assets/images/tambosiQuadrato.jpg" alt="Tambosi">
        </div>
        <img v-if="isDarkTheme"
            class="mx-auto mt-4 mb-4"
            src="~/assets/images/loghiBgBlack.png"
            alt="loghi"
             />
        <img v-else
            class="mx-auto bottom-4"
            src="~/assets/images/loghiBgWhite.png"
            alt="loghi"

            />

      </div>
    </footer>
  </div>
</template>

<script>
// Import the restaurants query
import homepageQuery from "~/apollo/queries/single/homepage";
import lastSchoolEpisodeQuery from "~/apollo/queries/episode/lastSchoolEpisode";

export default {
  layout: "home",
  data() {
    return {
      // Initialize an empty restaurants variabkle
      homepage: {},
      episodes: {},
    };
  },
  apollo: {
    homepage: {
      prefetch: true,
      query: homepageQuery,
    },
    episodes: {
      prefetch: true,
      query: lastSchoolEpisodeQuery,
      variables() {
        return { school: "itt-marconi" };
      },
    },
  },
  computed: {
    // Search system
    filteredList() {
      return "";
    },
    isDarkTheme() {
      if (typeof this.$colorMode.preference === 'undefined') return false;
      return this.$colorMode.preference === "dark"
  },

    spreakerEmbed() {
      let episode = this.episodes[0];
      let iframe = this.$spreakerIframe(
        episode.spreaker_id,
        "episode",
        "200px",
        this.$colorMode.preference,
        episode.spreaker_limited
      );
      return iframe;
    },
  },
};
</script>

<style lang="postcss" scoped>
.badge {
  @apply inline-block bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 dark:text-gray-200;
  &:hover {
    @apply bg-gray-300;
  }
}

div >>> iframe {
  border-radius: 0.75rem;
  background-color: rgba(255, 255, 255, 0.85);
  --tw-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000),
    var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}
div >>> iframe {
  background-color: #a78bfa;
}
</style>
